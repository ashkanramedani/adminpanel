<div class="breadcrumb flex gap-x-2 justify-between items-center px-5 mb-3 bg-white rounded-lg font-semibold text-xs">
  <nav>
    <ol class="flex items-center gap-1 py-2">
      <li>
        <span> {{ page_title }} <span class="pr-1">{{form_title}}</span></span>
      </li>
    </ol>
  </nav>
  <div class="icon flex items-center gap-x-3 py-2">
    <button [disabled]="this.ReportForm.invalid || btnLoading" (click)="onSubmit()"
      class="border border-cyan-600 px-4 py-2 rounded-md bg-cyan-600 text-white disabled:bg-cyan-400 disabled:border-cyan-400">
      ذخیره
    </button>
    <a class="border border-gray-500 px-4 py-2 rounded-md hover:bg-gray-200" [routerLink]="[cancle_link]">انصراف</a>
  </div>
</div>
<main>
  <div class="p-5 mb-3 bg-white rounded-lg">
    <form [formGroup]="ReportForm">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-3 gap-y-8 w-full py-4">
        <div class="relative">
          <input type="text" formControlName="name"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />

          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">نام
            <span class="text-red-500 text-lg">*</span>
          </label>

        </div>
        <div class="relative">
          <input type="text" formControlName="last_name"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            نام خانوادگی
            <span class="text-red-500 text-lg">*</span>
          </label>
        </div>
        <div class="relative w-full">
          <ng-persian-datepicker dir="ltr" [dateFormat]="'YYYY-MM-DD'" [dateInitValue]="true">
            <input type="text" formControlName="day_of_birth"
              class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none  focus:outline-none focus:ring-0 focus:border-blue-600 peer">
          </ng-persian-datepicker>
          <label
            class="absolute font-medium text-gray-800  duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white  px-2 peer-focus:px-2 peer-focus:text-blue-600  peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            تاریخ تولد
            <span class="text-red-500 text-lg">*</span>
          </label>
        </div>
        <div class="relative">
          <input type="text" formControlName="email"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            ایمیل
          </label>
        </div>
        <div class="relative">
          <input type="text" formControlName="id_card_number"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            کد ملی
            <span class="text-red-500 text-lg">*</span>
          </label>
        </div>
        <div class="relative">
          <input type="text" formControlName="mobile_number"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            همراه
            <span class="text-red-500 text-lg">*</span>
          </label>
        </div>
        <div class="relative ">
          <input type="text" formControlName="fingerprint_scanner_user_id"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            ID اثر انگشت
            <span class="text-red-500 text-lg">*</span>
          </label>
        </div>
        <div class="relative">
          <input type="text" formControlName="address"
            class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer" />
          <label
            class="absolute text-sm font-medium text-gray-800 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1">
            آدرس
          </label>
        </div>
        <div class="flex items-start justify-between gap-x-2">
          <div class="w-full">
            <div class="flex items-center justify-between mb-2">
              <span class="text-base font-semibold text-graydark dark:text-white">
                نقش
              </span>
              <button (click)="OpenModal()"
                class="border border-cyan-600 text-cyan-600 px-2 py-1 rounded-md">افزودن</button>
            </div>

            <input type="text" formControlName="roles" (click)="OpenSearchRole()"
              class="block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600" />
              @if (isOpenSearchRole) {
            <div
              class="search-tag max-h-44 bg-white  text-black border border-t-0 border-gray-300 rounded-br-lg rounded-bl-lg shadow-md max-h-34 overflow-y-auto">
              @for (item of RolesData | filter : this.ReportForm.controls.roles.value; track $index) {
              <div (click)="AddRoleInput(item.role_pk_id, item.name)"
                class="px-4 py-3 cursor-pointer hover:bg-gray-100 font-medium text-black dark:text-white">
                <b>{{ item.name}} &nbsp;</b> <span>( خوشه:&nbsp; <span>{{item.cluster}}</span></span> )
              </div>
              }
            </div>
          }
          </div>
          @if (RolesInputArray.length > 0) {
          <div
            class=" grid lg:grid-cols-3 grid-cols-1 items-center gap-2 mt-7 p-2  overflow-y-auto  w-1/2">
            @for (item of RolesInputTitleArray; track $index;let i = $index) {
            <div
              class="flex text-center justify-between text-black lg:font-semibold  p-2 border border-gray-200 bg-gray-100 rounded-md">
              <button>
                <svg (click)="RemoveRoleInput(i,item.role_id)"
                  class="w-9 pl-2 fill-body hover:fill-black dark:fill-bodydark dark:hover:fill-bodydark1 mx-auto cursor-pointer"
                  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path fill-rule="evenodd"
                    d="M15.78 14.36a1 1 0 0 1-1.42 1.42l-2.82-2.83-2.83 2.83a1 1 0 1 1-1.42-1.42l2.83-2.82L7.3 8.7a1 1 0 0 1 1.42-1.42l2.83 2.83 2.82-2.83a1 1 0 0 1 1.42 1.42l-2.83 2.83 2.83 2.82z">
                  </path>
                </svg>
              </button>
              <span title="{{item.role_title}}" class="pt-1 whitespace-nowrap overflow-hidden text-ellipsis">{{
                item.role_title }}</span>
            </div>
            }
          </div>
        }
        </div>
      </div>
    </form>
  </div>
  @if(IsShowenModal==true){
  <div  x-transition=""
    class="fixed   left-0 top-0 z-50 flex h-full min-h-screen w-full items-center justify-center bg-black/40 px-4 py-5 text-graydark dark:text-white">
    <div
      class="flex flex-col w-full mx-12 lg:mr-[19rem]  rounded-lg bg-white px-8 py-12 text-center dark:bg-boxdark text-graydark dark:text-white">
      <app-role-add [ShowCancleLink]="false"></app-role-add>
      <div class="footer flex items-end justify-end border-t py-3 border-[#b1b1b1]">
        <button (click)="CloseModal()"
          class="block  rounded border border-stroke bg-stroke hover:bg-bodydark1 font-semibold px-6 py-3 text-center  text-black-2 transition   dark:border-strokedark dark:bg-meta-4 dark:text-white">
          بستن
        </button>
      </div>
    </div>
  </div>
}
</main>
